(this["webpackJsonpmeasure.wtf"]=this["webpackJsonpmeasure.wtf"]||[]).push([[0],{14:function(e,t,n){e.exports=n(22)},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(8),c=n.n(o),l=n(4),s=n(13),u=n(2),m=n(6),d=n(10),v=n.n(d),g=n(11),h=n(12),x=function(){function e(t){Object(g.a)(this,e),this.svg=t,this.vtm=void 0,this.svg=t||document.createElementNS("http://www.w3.org/2000/svg","svg"),this.vtm=this.createSVGMatrix()}return Object(h.a)(e,[{key:"createSVGMatrix",value:function(){return this.svg.createSVGMatrix()}},{key:"scale",value:function(e,t,n){return this.vtm=this.createSVGMatrix().translate(n.x,n.y).scale(e,t).translate(-n.x,-n.y).multiply(this.vtm),this.vtm}}]),e}(),w=function(e,t){var n=e.matrix,a=e.dragging,r=e.startPosition,i=e.position;switch(t.type){case"move":var o={x:t.x,y:t.y};if(a){var c=o.x-r.x,l=o.y-r.y,s=Object(m.a)(n);return s[4]+=c,s[5]+=l,Object(u.a)(Object(u.a)({},e),{},{position:o,matrix:s})}return Object(u.a)(Object(u.a)({},e),{},{position:o});case"down":return Object(u.a)(Object(u.a)({},e),{},{startPosition:i,dragging:!0});case"up":return Object(u.a)(Object(u.a)({},e),{},{dragging:!1});case"matrix":return Object(u.a)(Object(u.a)({},e),{},{matrix:t.payload});case"zoom":for(var d=Object(m.a)(n),v=0;v<4;v++)d[v]=d[v]*t.delta;return d[4]=(1-t.delta)*i.x,d[5]=(1-t.delta)*i.y,Object(u.a)(Object(u.a)({},e),{},{matrix:d});default:throw new Error("".concat(t.type," not supported"))}},y=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)},f=function(e){var t=e.img;v()("\ud83d\udccf <".concat(t.file.name,">"));var n=Object(r.useRef)(null),o=Object(r.useRef)(null),c=Object(r.useReducer)(w,{points:[],matrix:[1,0,0,1,0,0],dragging:!1,viewport:{width:800,height:600},position:{x:0,y:0},startPosition:{x:0,y:0},svgRef:n,groupRef:o}),s=Object(l.a)(c,2),u=s[0],m=u.points,d=u.matrix,g=u.position,h=u.dragging,f=s[1];return Object(r.useEffect)((function(){var e=function(){return f({type:"up"})};return window.addEventListener("blur",e),window.addEventListener("mouseup",e),window.addEventListener("pointerup",e),function(){window.removeEventListener("blur",e),window.removeEventListener("mouseup",e),window.removeEventListener("pointerup",e)}})),i.a.createElement("div",{id:"editor"},i.a.createElement("svg",{overflow:"always",ref:n,id:"svg",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,t.width,t.height].join(" "),onMouseDown:function(){return f({type:"down"})},onWheel:function(e){var t=n.current,r=o.current;if(t&&r){var i=t.createSVGPoint();i.x=e.clientX,i.y=e.clientY;var c=r.getScreenCTM();if(null!==c){var l=i.matrixTransform(c.inverse()),s=l.x,u=l.y;f({type:"move",x:s,y:u}),a=a||new x(t);var m=1+.1*(e.deltaY<0?1:-1),d=m*t.height.baseVal.value/t.width.baseVal.value,v=a.scale(m,d,{x:s,y:u});f({type:"matrix",payload:[v.a,v.b,v.c,v.d,v.e,v.f]})}}},onMouseMove:function(e){var t=n.current,a=o.current;if(t&&a){var r=t.createSVGPoint();r.x=e.clientX,r.y=e.clientY;var i=a.getScreenCTM();if(null!==i){var c=r.matrixTransform(i.inverse()),l=c.x,s=c.y;f({type:"move",x:l,y:s})}}}},i.a.createElement("g",{transform:"matrix(".concat(d.join(" "),")"),ref:o},i.a.createElement("image",{width:t.width,height:t.height,xlinkHref:t.data}),i.a.createElement("g",null,m.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("circle",{cx:m[0].x,cy:m[0].y,r:5,fill:"white"}),i.a.createElement("circle",{cx:m[0].x,cy:m[0].y,r:3,fill:"hotpink"})),2===m.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement("circle",{cx:m[1].x,cy:m[1].y,r:5,fill:"white"}),i.a.createElement("circle",{cx:m[1].x,cy:m[1].y,r:3,fill:"hotpink"}),i.a.createElement("line",{x1:m[0].x,y1:m[0].y,x2:m[1].x,y2:m[1].y,stroke:"white",strokeWidth:5}),i.a.createElement("line",{x1:m[0].x,y1:m[0].y,x2:m[1].x,y2:m[1].y,strokeWidth:2,stroke:"hotpink"}),i.a.createElement("text",{x:m[1].x,y:m[1].y-20,style:{stroke:"white",strokeWidth:6}},y(m[0],m[1]).toFixed(2)),i.a.createElement("text",{x:m[1].x,y:m[1].y-20,style:{fill:"black"}},y(m[0],m[1]).toFixed(2)))))),i.a.createElement("div",{id:"info"},JSON.stringify({dragging:h,position:g})))};var p=function(){var e=i.a.useState(),t=Object(l.a)(e,2),n=t[0],a=t[1],o=i.a.useState(!1),c=Object(l.a)(o,2),u=c[0],m=c[1],d=Object(r.useCallback)((function(e){m(!0);var t=e.find(Boolean),n=new Image,r=new FileReader;r.readAsDataURL(t),r.onload=function(){n.src=r.result,n.onload=function(){a({file:t,width:n.width,height:n.height,data:r.result})}}}),[]),v=Object(s.a)({onDrop:d}),g=v.getRootProps,h=v.getInputProps,x=v.isDragActive;return n?i.a.createElement(f,{img:n}):i.a.createElement("div",Object.assign({id:"dropzone"},g()),u?i.a.createElement("span",null,"Reading image data..."):i.a.createElement(i.a.Fragment,null,i.a.createElement("input",h()),x?i.a.createElement("span",null,"Nice. I can read that. Now drop it on here..."):i.a.createElement("span",null,"Drag an image here, or click to browse for it")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(21);c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.42bf2026.chunk.js.map